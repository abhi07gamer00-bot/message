<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My Bestie üíñ</title>

<style>
* { box-sizing: border-box; }

body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#ffdde1,#ee9ca7);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:15px;
    text-align:center;
    overflow:hidden;
}

.card{
    background:white;
    padding:25px 20px;
    border-radius:22px;
    width:100%;
    max-width:420px;
    box-shadow:0 10px 25px rgba(0,0,0,0.25);
    z-index:2;
}

h1{ color:#ff5f7e; font-size:1.6rem; }

p{
    font-size:1rem;
    line-height:1.6;
    white-space:pre-line;
    min-height:110px;
}

button{
    margin-top:12px;
    padding:14px;
    width:100%;
    font-size:0.95rem;
    border:none;
    border-radius:30px;
    background:#ff5f7e;
    color:white;
    cursor:pointer;
}

.small-btn{ background:#ff8fa3; }

/* floating hearts */
.heart{
    position:fixed;
    bottom:-30px;
    animation:floatUp linear forwards;
    z-index:1;
}
@keyframes floatUp{
    from{ transform:translateY(0); opacity:1; }
    to{ transform:translateY(-120vh); opacity:0; }
}

/* explosions */
.explosion{
    position:fixed;
    font-size:22px;
    pointer-events:none;
    animation:explode 1s ease forwards;
    z-index:6;
}
@keyframes explode{
    from{ transform:scale(0.5); opacity:1; }
    to{
        transform:translate(var(--x),var(--y)) scale(1.4);
        opacity:0;
    }
}

/* modal */
.modal{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.45);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:10;
}
.modal-box{
    background:white;
    padding:25px 20px;
    border-radius:20px;
    width:85%;
    max-width:380px;
}
</style>
</head>

<body>

<audio id="bgMusic" loop>
    <source src="bg.mp3" type="audio/mpeg">
</audio>

<div class="card" id="content">
    <h1>This is for someone who is soo special for ussüíñ</h1>
    <p>Click a few times‚Ä¶ something special is waiting ‚ú®</p>
    <button onclick="handleClick()">Click me üí´</button>
    <p id="counter"></p>
</div>

<div class="modal" id="modal">
    <div class="modal-box">
        <h1 id="modalTitle"></h1>
        <p id="modalText"></p>
        <button onclick="closeModal()">Close üíï</button>
    </div>
</div>

<script>
let page = 0, clicks = 0;
const requiredClicks = [3,5,7];
const content = document.getElementById("content");
const music = document.getElementById("bgMusic");

/* background hearts */
const heartEmojis=["üíñ","üíó","üíì","üíï","üíò"];
setInterval(()=>{
    for(let i=0;i<4;i++){
        const h=document.createElement("div");
        h.className="heart";
        h.innerText=heartEmojis[Math.floor(Math.random()*heartEmojis.length)];
        h.style.left=Math.random()*100+"vw";
        h.style.fontSize=(14+Math.random()*18)+"px";
        h.style.opacity=0.6+Math.random()*0.4;
        h.style.animationDuration=(4+Math.random()*5)+"s";
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),9000);
    }
},250);

/* explosion */
function heartExplosion(count=22,spread=160){
    for(let i=0;i<count;i++){
        const h=document.createElement("div");
        h.className="explosion";
        h.innerText="üíó";
        h.style.left="50%";
        h.style.top="50%";
        h.style.setProperty("--x",(Math.random()*spread*2-spread)+"px");
        h.style.setProperty("--y",(Math.random()*spread*2-spread)+"px");
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),1000);
    }
}

function megaExplosion(){
    heartExplosion(40,260);
    setTimeout(()=>heartExplosion(40,300),150);
}

/* üî• FIXED TYPING (NO MULTIPLE INTERVALS) */
let typingTimer = null;

function typeText(el, text, speed = 38){
    if(typingTimer){
        clearInterval(typingTimer);
        typingTimer = null;
    }

    el.textContent = "";
    const chars = Array.from(text);
    let i = 0;

    typingTimer = setInterval(()=>{
        el.textContent += chars[i++];
        if(i >= chars.length){
            clearInterval(typingTimer);
            typingTimer = null;
        }
    }, speed);
}

/* click logic */
function handleClick(){
    if(music.paused){
        music.volume=0.4;
        music.play();
    }

    clicks++;
    if(page < requiredClicks.length){
        document.getElementById("counter").innerText =
        `Clicks: ${clicks} / ${requiredClicks[page]}`;
    }

    if(page < requiredClicks.length && clicks === requiredClicks[page]){
        heartExplosion();
        clicks = 0;
        page++;
        loadPage();
    }
}

function loadPage(){
    if(page === 3){
        content.innerHTML = `
        <h1>A Message for You üíñ</h1>
        <p id="typing"></p>

        <button class="small-btn" onclick="openModal(1)">Things we like about you</button>
        <button class="small-btn" onclick="openModal(2)">How grateful we are</button>
        <button class="small-btn" onclick="openModal(3)">Things we‚Äôd like to do someday with you</button>
        `;

        typeText(
            document.getElementById("typing"),
`No matter what happens in life,
remember you are deeply loved üíï

You matter more than you know,
and we‚Äôre always proud of you üå∏`
        );
    }
}

function openModal(type){
    document.getElementById("modal").style.display="flex";

    const title=document.getElementById("modalTitle");
    const text=document.getElementById("modalText");
    text.textContent = ""; // safety clear

    if(type===1){
        title.textContent="Things we like about you üíï";
        typeText(text,`What makes you truly special is the way you listen with patience, presence, and genuine care! ‚ù§Ô∏è
You let us speak fully, then comfort us gently before helping us understand things more clearly!!! üéÄü´∂
You balance softness and energy so beautifully, and your sensitivity only adds to how deeply you care!! ‚ú®‚ù§Ô∏è
Even when life is busy for you, you still show up for others and that says everything about your heart!!
You calm us, motivate us, protect us, and hype us in ways that feel real and safe!!
Your care, honesty, and consistency make you someone incredibly rare.
We are truly grateful to have you in our lives.
Thank you soooo much for always being there for us üò≠‚ù§Ô∏è`);
    }

    if(type===2){
        title.textContent="How grateful we are üå∑";
        typeText(text,`We are genuinely so grateful for you ‚Äî for your time, your patience, and the care you give so effortlessly.
Having you in our lives feels comforting in a way that‚Äôs hard to explain but easy to feel.
You make things lighter just by being yourself, and that‚Äôs something we never take for granted.
We are thankful not just for what you do, but for who you are.
You have become someone we truly value and appreciate more than words can fully express.
Your presence feels like a safe place, and we are really grateful for that.`);
    }

    if(type===3){
        title.textContent="Someday with you üåô";
        typeText(text,`We would love to go on long night walks with you, talking about random things and laughing without realizing how much time has passed.
Watching a movie together, sharing reactions, inside jokes, and just enjoying the moment.
A chill beach-side hangout ‚Äî good food, soft music, cool breeze, and us just sitting there, enjoying the view and each other‚Äôs company.
Walking around, clicking random photos, talking about life, dreams, and everything in between.
Just simple moments with you ‚Äî no rush, no pressure, just comfort and good vibes.`);
    }
}

function closeModal(){
    document.getElementById("modal").style.display="none";
    megaExplosion();
}
</script>

</body>
</html>
