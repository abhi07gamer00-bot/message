<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My Bestie üíñ</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #ffdde1, #ee9ca7);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 15px;
    text-align: center;
    overflow: hidden;
}

.card {
    background: white;
    padding: 25px 20px;
    border-radius: 22px;
    width: 100%;
    max-width: 420px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.25);
    z-index: 2;
}

h1 {
    color: #ff5f7e;
    font-size: 1.6rem;
}

p {
    font-size: 1rem;
    line-height: 1.6;
    min-height: 110px;
}

button {
    margin-top: 12px;
    padding: 14px;
    width: 100%;
    font-size: 0.95rem;
    border: none;
    border-radius: 30px;
    background: #ff5f7e;
    color: white;
    cursor: pointer;
}

.small-btn {
    background: #ff8fa3;
}

/* FLOATING HEARTS */
.heart {
    position: fixed;
    bottom: -30px;
    animation: floatUp linear forwards;
    z-index: 1;
}
@keyframes floatUp {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-120vh); opacity: 0; }
}

/* HEART EXPLOSION */
.explosion {
    position: fixed;
    font-size: 22px;
    pointer-events: none;
    animation: explode 1s ease forwards;
    z-index: 5;
}
@keyframes explode {
    from { transform: scale(0.5); opacity: 1; }
    to {
        transform: translate(var(--x), var(--y)) scale(1.4);
        opacity: 0;
    }
}

/* MODAL */
.modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 10;
}
.modal-box {
    background: white;
    padding: 25px 20px;
    border-radius: 20px;
    width: 85%;
    max-width: 380px;
    animation: pop 0.3s ease;
}
@keyframes pop {
    from { transform: scale(0.85); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}
</style>
</head>

<body>

<audio id="bgMusic" loop>
    <source src="bg.mp3" type="audio/mpeg">
</audio>

<div class="card" id="content">
    <h1>This is for someone who is so special for us üíñ</h1>
    <p>Click a few times‚Ä¶ something special is waiting ‚ú®</p>
    <button onclick="handleClick()">Click me üí´</button>
    <p id="counter"></p>
</div>

<!-- MODAL -->
<div class="modal" id="modal">
    <div class="modal-box">
        <h1 id="modalTitle"></h1>
        <p id="modalText"></p>
        <button onclick="closeModal()">Close üíï</button>
    </div>
</div>

<script>
let page = 0;
let clicks = 0;
const requiredClicks = [3,5,7];
const content = document.getElementById("content");
const music = document.getElementById("bgMusic");

/* DENSE FLOATING HEARTS */
const heartEmojis = ["üíñ","üíó","üíì","üíï","üíò"];
setInterval(() => {
    for(let i=0;i<4;i++){
        const h=document.createElement("div");
        h.className="heart";
        h.innerText=heartEmojis[Math.floor(Math.random()*heartEmojis.length)];
        h.style.left=Math.random()*100+"vw";
        h.style.fontSize=(14+Math.random()*18)+"px";
        h.style.opacity=0.6+Math.random()*0.4;
        h.style.animationDuration=(4+Math.random()*5)+"s";
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),9000);
    }
},250);

/* üí• HEART EXPLOSION ‚Äî FIXED */
function heartExplosion(){
    for(let i=0;i<20;i++){
        const h=document.createElement("div");
        h.className="explosion";
        h.innerText="üíó";
        h.style.left="50%";
        h.style.top="50%";
        h.style.setProperty("--x",(Math.random()*320-160)+"px");
        h.style.setProperty("--y",(Math.random()*320-160)+"px");
        document.body.appendChild(h);
        setTimeout(()=>h.remove(),1000);
    }
}

/* ‚å®Ô∏è TYPING EFFECT */
function typeText(el,text,speed=40){
    el.innerHTML="";
    let i=0;
    const t=setInterval(()=>{
        el.innerHTML+=text.charAt(i);
        i++;
        if(i>=text.length) clearInterval(t);
    },speed);
}

function handleClick(){
    if(music.paused){
        music.volume=0.4;
        music.play();
    }

    clicks++;

    if(page < requiredClicks.length && clicks < requiredClicks[page]){
        document.getElementById("counter").innerText =
        `Clicks: ${clicks} / ${requiredClicks[page]}`;
        return;
    }

    heartExplosion(); // üî• NOW IT WORKS

    clicks=0;
    page++;
    loadPage();
}

function loadPage(){
    if(page===4){
        content.innerHTML=`
        <h1>A Message for You üíñ</h1>
        <p id="typing"></p>

        <button class="small-btn" onclick="openModal(1)">Things we like about you</button>
        <button class="small-btn" onclick="openModal(2)">How grateful we are</button>
        <button class="small-btn" onclick="openModal(3)">Things we‚Äôd like to do someday with you</button>
        `;
        typeText(document.getElementById("typing"),
` `);
    }
}

function openModal(type){
    const modal=document.getElementById("modal");
    const title=document.getElementById("modalTitle");
    const text=document.getElementById("modalText");
    modal.style.display="flex";

    heartExplosion(); // üí• also explode on modal open

    if(type===1){
        title.innerText="Things we like about you üíï";
        typeText(text,
`What makes you truly special is the way you listen with patience, 
presence, and genuine care!‚ù§Ô∏è You let us speak fully then comfort us gently before helping us understand things more clearly!!!üéÄü´∂ 
You balance softness and energy so beautifully and your sensitivity only adds to how deeply you care!!‚ú®‚ù§Ô∏è
Even when life is busy for you, you still show up for others and that says everything about your heart!!
You calm us, motivate us, protect us, and hype us in ways that feel real and safe!! 
Your care, honesty, and consistency make you someone incredibly rare and we are truly grateful to have you in our lives 
thank you soo muchhh for always being there for us üò≠‚ù§Ô∏è`);
    }
    if(type===2){
        title.innerText="How grateful we are üå∑";
        typeText(text,
`Grateful for your presence,
your support, your time,
and every moment you stayed ‚ú®`);
    }
    if(type===3){
        title.innerText="Someday with you üí´";
        typeText(text,
`Travel together,
laugh endlessly,
and make memories
we‚Äôll never forget üíï`);
    }
}

function closeModal(){
    document.getElementById("modal").style.display="none";
}
</script>

</body>
</html>
